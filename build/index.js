var t,e,s={d:(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},n={};s.d(n,{FV:()=>t,Q1:()=>g,dw:()=>F,lZ:()=>f,Zt:()=>B,A1:()=>m,Uz:()=>e,s3:()=>h,Ji:()=>o,KK:()=>l,w3:()=>i,BU:()=>p,A4:()=>K,Z5:()=>M,gX:()=>x,I9:()=>_}),function(t){let e,s;!function(t){t.addAll=function(t,e){for(const s of e)t.push(s);return t},t.removeAll=function(t,e){const s=new globalThis.Set(e);if(!s.size)return t;for(let e=t.length-1;e>=0;e--)s.has(t[e])&&t.splice(e,1);return t}}(e=t.Array||(t.Array={})),function(t){t.addAll=function(t,e){for(const s of e)t.add(s);return t},t.removeAll=function(t,e){for(const s of e)t.delete(s);return t}}(s=t.Set||(t.Set={}))}(t||(t={})),function(t){t.Unidentified="Unidentified",t.Pause="Pause",t.Backspace="Backspace",t.Tab="Tab",t.NumLock="NumLock",t.Enter="Enter",t.ShiftLeft="ShiftLeft",t.ShiftRight="ShiftRight",t.ControlLeft="ControlLeft",t.ControlRight="ControlRight",t.AltLeft="AltLeft",t.AltRight="AltRight",t.CapsLock="CapsLock",t.Lang1="Lang1",t.Lang2="Lang2",t.Escape="Escape",t.Space="Space",t.Numpad9="Numpad9",t.Numpad3="Numpad3",t.Numpad1="Numpad1",t.Numpad7="Numpad7",t.Left="ArrowLeft",t.Up="ArrowUp",t.Right="ArrowRight",t.Down="ArrowDown",t.F13="F13",t.Numpad0="Numpad0",t.NumpadDecimal="NumpadDecimal",t.Digit0="Digit0",t.Digit1="Digit1",t.Digit2="Digit2",t.Digit3="Digit3",t.Digit4="Digit4",t.Digit5="Digit5",t.Digit6="Digit6",t.Digit7="Digit7",t.Digit8="Digit8",t.Digit9="Digit9",t.Period="Period",t.Semicolon="Semicolon",t.Backquote="Backquote",t.Equal="Equal",t.Minus="Minus",t.A="KeyA",t.B="KeyB",t.C="KeyC",t.D="KeyD",t.E="KeyE",t.F="KeyF",t.G="KeyG",t.H="KeyH",t.I="KeyI",t.J="KeyJ",t.K="KeyK",t.L="KeyL",t.M="KeyM",t.N="KeyN",t.O="KeyO",t.P="KeyP",t.Q="KeyQ",t.R="KeyR",t.S="KeyS",t.T="KeyT",t.U="KeyU",t.V="KeyV",t.W="KeyW",t.X="KeyX",t.Y="KeyY",t.Z="KeyZ",t.MetaLeft="MetaLeft",t.MetaRight="MetaRight",t.ContextMenu="ContextMenu",t.NumpadMultiply="NumpadMultiply",t.NumpadAdd="NumpadAdd",t.NumpadSubtract="NumpadSubtract",t.NumpadDivide="NumpadDivide",t.F1="F1",t.F2="F2",t.F3="F3",t.F4="F4",t.F5="F5",t.F6="F6",t.F7="F7",t.F8="F8",t.F9="F9",t.F10="F10",t.F11="F11",t.F12="F12",t.F14="F14",t.F15="F15",t.F16="F16",t.F17="F17",t.F18="F18",t.F19="F19",t.F20="F20",t.F21="F21",t.F22="F22",t.F23="F23",t.F24="F24",t.F25="F25",t.F26="F26",t.F27="F27",t.F28="F28",t.F29="F29",t.F30="F30",t.F31="F31",t.F32="F32",t.ScrollLock="ScrollLock",t.BracketLeft="BracketLeft",t.BracketRight="BracketRight",t.Backslash="Backslash",t.Quote="Quote",t.MediaTrackNext="MediaTrackNext",t.MediaTrackPrevious="MediaTrackPrevious",t.VolumeMute="VolumeMute",t.VolumeDown="VolumeDown",t.VolumeUp="VolumeUp",t.Comma="Comma",t.Slash="Slash",t.IntlBackslash="IntlBackslash",t.IntlRo="IntlRo",t.NumpadComma="NumpadComma",t.OSLeft="OSLeft",t.WakeUp="WakeUp"}(e||(e={}));var i,a=t.Set.addAll,r=t.Set.removeAll;class h{constructor(){this._newPressedKeys=new Set,this._newReleasedKeys=new Set,this._keys=Object.values(e),this._downKeys=new Set,this._upKeys=new Set,this._pressedKeys=new Set,this._releasedKeys=new Set,this._newTypedString="",this._typedString="",B._ensureLaunched();const t=B.canvas;t.addEventListener("keydown",(t=>this._onKeyDown(t))),t.addEventListener("keyup",(t=>this._onKeyUp(t)))}static get typedString(){return this._self._typedString}static get downKeys(){return this._self._downKeys}static get upKeys(){return this._self._upKeys}static get pressedKeys(){return this._self._pressedKeys}static get releasedKeys(){return this._self._releasedKeys}static isKeyDown(t){return this._self._downKeys.has(e[t])}static isKeyUp(t){return this._self._upKeys.has(e[t])}static isKeyPressed(t){return this._self._pressedKeys.has(e[t])}static isKeyReleased(t){return this._self._releasedKeys.has(e[t])}static get _self(){return this._instance??(this._instance=new this)}_update(){B.focused?(this._updateTypedString(),this._updatePressedKeys(),this._updateDownKeys(),this._updateReleasedKeys(),this._updateUpKeys()):this._reset()}_onKeyDown(t){const e=t.code;this._keys.includes(e)&&this._newPressedKeys.add(e),1===t.key.length&&(this._newTypedString+=t.key)}_onKeyUp(t){const e=t.code;this._keys.includes(e)&&this._newReleasedKeys.add(e)}_updateTypedString(){this._typedString=this._newTypedString,this._newTypedString=""}_updateDownKeys(){a(this._downKeys,this._newPressedKeys),this._newPressedKeys.clear()}_updateUpKeys(){this._upKeys.clear(),a(this._upKeys,this._keys),r(this._upKeys,this._downKeys)}_updatePressedKeys(){this._pressedKeys.clear(),a(this._pressedKeys,this._newPressedKeys),r(this._pressedKeys,this._downKeys)}_updateReleasedKeys(){this._releasedKeys.clear(),a(this._releasedKeys,this._newReleasedKeys),this._newReleasedKeys.clear(),r(this._downKeys,this._releasedKeys)}_reset(){this._newTypedString="",this._typedString="",this._newPressedKeys.clear(),this._downKeys.clear(),this._newReleasedKeys.clear(),this._releasedKeys.clear(),this._updateUpKeys()}}h._instance=null,function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"}(i||(i={}));var o,u=t.Set.addAll,c=t.Set.removeAll;class l{constructor(){this._newPressedButtons=new Set,this._newReleasedButtons=new Set,this._buttons=Object.values(i),this._downButtons=new Set,this._upButtons=new Set,this._pressedButtons=new Set,this._releasedButtons=new Set,B._ensureLaunched();const t=B.canvas;t.addEventListener("mousedown",(t=>this._onMouseDown(t))),t.addEventListener("mouseup",(t=>this._onMouseUp(t)))}static get downButtons(){return this._self._downButtons}static get upButtons(){return this._self._upButtons}static get pressedButtons(){return this._self._pressedButtons}static get releasedButtons(){return this._self._releasedButtons}static isButtonDown(t){return this._self._downButtons.has(i[t])}static isButtonUp(t){return this._self._upButtons.has(i[t])}static isButtonPressed(t){return this._self._pressedButtons.has(i[t])}static isButtonReleased(t){return this._self._releasedButtons.has(i[t])}static get _self(){return this._instance??(this._instance=new this)}_update(){B.focused?(this._updatePressedButtons(),this._updateDownButtons(),this._updateReleasedButtons(),this._updateUpButtons()):this._reset()}_onMouseDown(t){const e=t.button;this._buttons.includes(e)&&this._newPressedButtons.add(e)}_onMouseUp(t){const e=t.button;this._buttons.includes(e)&&this._newReleasedButtons.add(e)}_updateDownButtons(){u(this._downButtons,this._newPressedButtons),this._newPressedButtons.clear()}_updateUpButtons(){this._upButtons.clear(),u(this._upButtons,this._buttons),c(this._upButtons,this._downButtons)}_updatePressedButtons(){this._pressedButtons.clear(),u(this._pressedButtons,this._newPressedButtons),c(this._pressedButtons,this._downButtons)}_updateReleasedButtons(){this._releasedButtons.clear(),u(this._releasedButtons,this._newReleasedButtons),this._newReleasedButtons.clear(),c(this._downButtons,this._releasedButtons)}_reset(){this._newPressedButtons.clear(),this._downButtons.clear(),this._newReleasedButtons.clear(),this._releasedButtons.clear(),this._updateUpButtons()}}l._instance=null,function(t){t.clamp=function(t,e,s){return globalThis.Math.min(globalThis.Math.max(t,e),s)}}(o||(o={}));var d=o.clamp;class _{constructor(t=0,e=t){this.x=t,this.y=e}plus(t){return"number"==typeof t?new _(this.x+t,this.y+t):new _(this.x+t.x,this.y+t.y)}minus(t){return"number"==typeof t?new _(this.x-t,this.y-t):new _(this.x-t.x,this.y-t.y)}times(t){return"number"==typeof t?new _(this.x*t,this.y*t):new _(this.x*t.x,this.y*t.y)}div(t){return"number"==typeof t?0===t?_.ZERO:new _(this.x/t,this.y/t):new _(0===t.x?0:this.x/t.x,0===t.y?0:this.y/t.y)}equals(t){return"number"==typeof t?this.x===t&&this.y===t:this.x===t.x&&this.y===t.y}clamp(t,e){let s,n,i,a;return"number"==typeof t?(s=t,i=t):(s=t.x,i=t.y),"number"==typeof e?(n=e,a=e):(n=e.x,a=e.y),new _(d(this.x,s,n),d(this.y,i,a))}clampX(t,e){return this.x<t?new _(t,this.y):this.x>e?new _(e,this.y):this}clampY(t,e){return this.y<t?new _(this.x,t):this.y>e?new _(this.x,e):this}distanceTo(t){const e=t.x-this.x,s=t.y-this.y;return Math.sqrt(e*e+s*s)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}rotate(t,e){const s=t*Math.PI/180,n=Math.cos(s),i=Math.sin(s),a=this.x-e.x,r=this.y-e.y,h=a*i+r*n;return new _(a*n-r*i+e.x,h+e.y)}angleBetween(t){const e=this.length()*t.length();return 0===e?0:Math.acos(this.dot(t)/e)}reflect(t){const e=this.dot(t);return new _(this.x-2*e*t.x,this.y-2*e*t.y)}lerp(t,e){const s=Math.max(0,Math.min(1,e));return new _(this.x+(t.x-this.x)*s,this.y+(t.y-this.y)*s)}slerp(t,e){const s=this.angleBetween(t),n=Math.cos(s*e),i=Math.sin(s*e);return new _(this.x*n+t.x*i,this.y*n+t.y*i)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}round(){return new _(Math.round(this.x),Math.round(this.y))}abs(){return new _(Math.abs(this.x),Math.abs(this.y))}normalize(){const t=this.length();return 0===t?_.ZERO:new _(this.x/t,this.y/t)}}_.ZERO=new _,_.UP=new _(0,-1),_.DOWN=new _(0,1),_.LEFT=new _(-1,0),_.RIGHT=new _(1,0);var p,y=o.clamp;class g{constructor(t,e,s,n=1){this.red=y(Math.round(t),0,255),this.green=y(Math.round(e),0,255),this.blue=y(Math.round(s),0,255),this.alpha=y(n,0,1)}static rgb(t,e,s){return`rgb(${y(t,0,255)}, ${y(e,0,255)}, ${y(s,0,255)})`}static rgba(t,e,s,n){return`rgba(${y(t,0,255)}, ${y(e,0,255)}, ${y(s,0,255)}, ${y(n,0,1)})`}static hsl(t,e,s){return`hsl(${y(t,0,360)}, ${y(e,0,100)}%, ${y(s,0,100)}%)`}static hsla(t,e,s,n){return`hsla(${y(t,0,360)}, ${y(e,0,100)}%, ${y(s,0,100)}%, ${y(n,0,1)})`}static extract(t){if(t.startsWith("#")){let e=t.replace("#","");if(3===e.length&&(e=e.split("").map((t=>t+t)).join("")),6===e.length||8===e.length){const t=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),i=8===e.length?parseInt(e.substring(6,8),16)/255:1;return new g(t,s,n,i)}}const e=/^rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)$/.exec(t);if(e){const t=y(parseInt(e[1]),0,255),s=y(parseInt(e[2]),0,255),n=y(parseInt(e[3]),0,255);return new g(t,s,n)}const s=/^rgba\((\d{1,3}), (\d{1,3}), (\d{1,3}), ([0-1]?\.\d+|[0-9]{1,3})\)$/.exec(t);if(s){const t=y(parseInt(s[1]),0,255),e=y(parseInt(s[2]),0,255),n=y(parseInt(s[3]),0,255),i=y(parseFloat(s[4]),0,1);return new g(t,e,n,i)}const n=/^hsl\((\d{1,3}), (\d{1,3})%, (\d{1,3})%\)$/.exec(t);if(n){const t=y(parseInt(n[1]),0,360),e=y(parseInt(n[2]),0,100),s=y(parseInt(n[3]),0,100);return this.fromHsl(t,e,s)}const i=/^hsla\((\d{1,3}), (\d{1,3})%, (\d{1,3})%, ([0-1]?\.\d+|[0-9]{1,3})\)$/.exec(t);if(i){const t=y(parseInt(i[1]),0,360),e=y(parseInt(i[2]),0,100),s=y(parseInt(i[3]),0,100),n=y(parseFloat(i[4]),0,1);return this.fromHsla(t,e,s,n)}return new g(0,0,0)}static fromRgb(t,e,s){return new g(t,e,s)}static fromRgba(t,e,s,n){return new g(t,e,s,n)}static fromHsl(t,e,s){return this.fromHsla(t,e,s,1)}static fromHsla(t,e,s,n){const i=(1-Math.abs(2*s/100-1))*(e/100),a=i*(1-Math.abs(t/60%2-1)),r=s/100-i/2;let h=0,o=0,u=0;return t>=0&&t<60?(h=i,o=a,u=0):t>=60&&t<120?(h=a,o=i,u=0):t>=120&&t<180?(h=0,o=i,u=a):t>=180&&t<240?(h=0,o=a,u=i):t>=240&&t<300?(h=a,o=0,u=i):t>=300&&t<360&&(h=i,o=0,u=a),new g(255*(h+r),255*(o+r),255*(u+r),n)}toString(){return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`}}g.BLACK="rgb(0, 0, 0)",g.WHITE="rgb(255, 255, 255)",g.GRAY="rgb(127, 127, 127)",g.RED="rgb(255, 0, 0)",g.GREEN="rgb(0, 255, 0)",g.BLUE="rgb(0, 0, 255)",g.YELLOW="rgb(255, 255, 0)",g.ORANGE="rgb(255, 165, 0)",g.PURPLE="rgb(127, 0, 127)",g.TRANSPARENT="rgba(0, 0, 0, 0)",function(t){t.nativePaint=function(t){return"string"==typeof t?t:t.toString()}}(p||(p={}));var f,w=p.nativePaint;class m{constructor(t){this._context=t}get width(){return this._context.canvas.width}get height(){return this._context.canvas.height}clear(t){this._context.fillStyle=w(t),this._context.fillRect(0,0,this.width,this.height)}}class K{constructor(){B._ensureLaunched(),this._buffer=new OffscreenCanvas(B.width,B.height),this._context=B.canvas.getContext("2d"),this._graphics=new m(this._buffer.getContext("2d"))}static get graphics(){return this._self._graphics}static get _self(){return this._instance??(this._instance=new this)}_update(){const t=B.screenSize,e=B.scaleFactor,s=B.size.times(e),n=t.minus(s).div(2);this._context.fillStyle="#000",this._context.fillRect(0,0,t.x,t.y),this._context.drawImage(this._buffer,n.x,n.y,s.x,s.y)}}K._instance=null,function(t){t[t.Nanoseconds=1]="Nanoseconds",t[t.Microseconds=1e3]="Microseconds",t[t.Milliseconds=1e6]="Milliseconds",t[t.Seconds=1e9]="Seconds",t[t.Minutes=6e10]="Minutes",t[t.Hours=36e11]="Hours",t[t.Days=864e11]="Days"}(f||(f={}));class F{constructor(t,e="Nanoseconds"){this._nanoseconds=t*f[e]}static fromNanoseconds(t){return new F(t,"Nanoseconds")}static fromMicroseconds(t){return new F(t,"Microseconds")}static fromMilliseconds(t){return new F(t,"Milliseconds")}static fromSeconds(t){return new F(t,"Seconds")}static fromMinutes(t){return new F(t,"Minutes")}static fromHours(t){return new F(t,"Hours")}static fromDays(t){return new F(t,"Days")}to(t){return this._nanoseconds/f[t]}get nanoseconds(){return this.to("Nanoseconds")}get microseconds(){return this.to("Microseconds")}get milliseconds(){return this.to("Milliseconds")}get seconds(){return this.to("Seconds")}get minutes(){return this.to("Minutes")}get hours(){return this.to("Hours")}get days(){return this.to("Days")}add(t){return new F(this._nanoseconds+t._nanoseconds)}subtract(t){return new F(this._nanoseconds-t._nanoseconds)}toString(){const t=Math.floor(this.days),e=Math.floor(this.hours%24),s=Math.floor(this.minutes%60),n=Math.floor(this.seconds%60),i=Math.floor(this.milliseconds%1e3),a=[];return t&&a.push(`${t}d`),e&&a.push(`${e}h`),s&&a.push(`${s}m`),n&&a.push(`${n}s`),i&&a.push(`${i}ms`),a.length>0?a.join(" "):"0ms"}}class x{constructor(){this._launchTime=performance.now(),this._fixedDelta=1/60,this._startTime=this._launchTime,this._lastFrameTime=0,this._frameCount=0,this._delta=0,this._averageFPS=0,B._ensureLaunched()}static get elapsed(){return F.fromMilliseconds(performance.now()-this._self._launchTime)}static get delta(){return this._self._delta}static get fixedDelta(){return this._self._fixedDelta}static get averageFPS(){return this._self._averageFPS}static get currentFPS(){const t=this._self;return t._delta<=0?0:1/t._delta}static get _self(){return this._instance??(this._instance=new this)}_update(){const t=performance.now()-this._startTime;this._frameCount++,this._delta=(t-this._lastFrameTime)/1e3;const e=t/1e3;this._averageFPS=0===e?0:this._frameCount/e,this._lastFrameTime=t}_restart(){this._startTime=performance.now(),this._lastFrameTime=0,this._frameCount=0,this._delta=0,this._averageFPS=0}}x._instance=null;class B{constructor(){this._time=null,this._keyboard=null,this._mouse=null,this._renderer=null,this._canvas=null,this._scene=null,this._size=null,this._shouldResize=!1,B._ensureLaunched()}static get focused(){return document.activeElement===this._self._canvas}static get canvas(){return this._self._canvas}static get scene(){return this._self._scene}static set scene(t){this._self._scene=t}static get width(){return this._self._size.x}static get height(){return this._self._size.y}static get size(){return this._self._size}static get screenWidth(){return this._self._canvas.width}static get screenHeight(){return this._self._canvas.height}static get screenSize(){const t=this._self;return new _(t._canvas.width,t._canvas.height)}static get scaleFactor(){const t=this._self;return Math.min(t._canvas.width/t._size.x,t._canvas.height/t._size.y)}static launch(t){this._ensureNotLaunched(),this._launched=!0,this._self._launch(t)}static get _self(){return this._instance??(this._instance=new this)}static _ensureNotLaunched(){if(this._launched)throw new Error("Game has already been launched")}static _ensureLaunched(){if(!this._launched)throw new Error("Game has not been launched")}_launch(t){this._scene=t.scene,this._canvas=t.canvas,this._size=new _(t.width??800,t.height??600),this._initialize(),this._start()}_initialize(){this._initializeCanvas(),this._time=x._self,this._keyboard=h._self,this._mouse=l._self,this._renderer=K._self}_initializeCanvas(){this._resizeCanvas(),new ResizeObserver((()=>this._shouldResize=!0)).observe(this._canvas.parentElement),this._canvas.tabIndex=0,this._canvas.oncontextmenu=()=>!1,this._canvas.focus()}_start(){this._scene._initialize().then((()=>this._frame()))}_update(){const t=this._scene;return this._time._update(),this._keyboard._update(),this._mouse._update(),t.update(),this._handleResizing(),this._renderer._update(),this._nextFrame(t)}_nextFrame(t){return this._scene===t?this._frame():(t.stop(),this._scene._initialize().then((()=>(this._time._restart(),this._frame()))))}_frame(){return new Promise((t=>requestAnimationFrame((()=>this._update().then(t)))))}_handleResizing(){this._shouldResize&&(this._shouldResize=!1,this._resizeCanvas())}_resizeCanvas(){const{width:t,height:e}=this._canvas.parentElement.getBoundingClientRect();this._canvas.width=t,this._canvas.height=e}}B._instance=null,B._launched=!1;class M{constructor(){this._initialized=!1}async _initialize(){return this._initialized||(this._initialized=!0,await this.initialize()),this.start()}}var S=n.FV,b=n.Q1,v=n.dw,R=n.lZ,D=n.Zt,L=n.A1,P=n.Uz,N=n.s3,z=n.Ji,k=n.KK,T=n.w3,U=n.BU,A=n.A4,C=n.Z5,E=n.gX,I=n.I9;export{S as CollectionUtilities,b as Color,v as Duration,R as DurationUnit,D as Game,L as Graphics,P as Key,N as Keyboard,z as MathUtilities,k as Mouse,T as MouseButton,U as PaintUtilities,A as Renderer,C as Scene,E as Time,I as Vector2};